sub EVENT_AGGRO {
    #:: Reset variable on spawn
    $HPThreshold = 0;
    quest::setnexthpevent(90);
    quest::shout("I, DRUNBAR, WILL SAVE THE VAULT");
}

sub EVENT_HP {
    if ($hpevent == 90) {
        if ($HPThreshold == 0) {
            $HPThreshold = 1;
			quest::debug("Start of 90 HP EVENT");
			quest::shout("My bark!!!");
			quest::spawn2(4010,0,0,$x-10,$y10,$z+1,$h);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
            quest::setnexthpevent(80);
        }
    }
    elsif ($hpevent == 80) {
        if ($HPThreshold == 1) {
            $HPThreshold = 2;
			quest::debug("Start of 80 HP EVENT");
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
            quest::setnexthpevent(70);
        }
    }
	elsif ($hpevent == 70) {
        if ($HPThreshold == 2) {
			quest::debug("Start of 70 HP EVENT");
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
            quest::setnexthpevent(60);
        }
    }
	elsif ($hpevent == 60) {
        if ($HPThreshold == 2) {
			quest::debug("Start of 60 HP EVENT");
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
            quest::setnexthpevent(50);
        }
    }
	elsif ($hpevent == 50) {
        if ($HPThreshold == 2) {
			quest::debug("Start of 50 HP EVENT");
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
            quest::setnexthpevent(40);
        }
    }
	elsif ($hpevent == 40) {
        if ($HPThreshold == 2) {
			quest::debug("Start of 40 HP EVENT");
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
            quest::setnexthpevent(30);
        }
    }
	elsif ($hpevent == 30) {
        if ($HPThreshold == 2) {
			quest::debug("Start of 30 HP EVENT");
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
            quest::setnexthpevent(20);
        }
    }
	elsif ($hpevent == 20) {
        if ($HPThreshold == 2) {
			quest::debug("Start of 20 HP EVENT");
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
			quest::spawn2(4010,0,0,-410,321.82,4.88,481);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-517.06,449.82,5.35,269.5);
			quest::spawn2(4010,0,0,-587.98,222.42,4.88,42.5);
			quest::spawn2(4010,0,0,-398.67,462.48,4.88,338.5);
			quest::spawn2(4010,0,0,-475.25,387.08,4.88,196.5);
        }
    }
}